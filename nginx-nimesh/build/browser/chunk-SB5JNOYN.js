import{a as O}from"./chunk-IXCLTE66.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-5RBAZJQA.js";import{b as I}from"./chunk-DJWEABC6.js";import{i as C,j as y,n as S,p as k,r as P}from"./chunk-MZLVPJ5Q.js";import{Bc as o,Cc as c,Db as b,Kb as s,Qc as h,Sc as u,Tb as p,cc as i,dc as r,ec as f,fc as _,gc as x,nb as l,ob as g,qc as v}from"./chunk-2GFQMTJ2.js";function D(a,m){if(a&1&&(i(0,"tr",10)(1,"td",7),o(2),r(),i(3,"td",11),o(4),r(),i(5,"td",7),o(6),h(7,"date"),r(),i(8,"td",7),o(9),r(),i(10,"td",7),o(11),r(),i(12,"td",12),o(13),h(14,"number"),r()()),a&2){let n,t,e=m.$implicit;l(2),c(e.itemCode),l(2),c(e.reference),l(2),c(u(7,6,e.recordDate==null?null:e.recordDate.toDate(),"yyyy-MM-dd HH:mm:ss")),l(3),c((n=e.qtyIn)!==null&&n!==void 0?n:"-"),l(2),c((t=e.qtyOut)!==null&&t!==void 0?t:"-"),l(2),c(u(14,9,e.price,"1.2-2"))}}function M(a,m){a&1&&f(0,"div",13)}function w(a,m){if(a&1&&(_(0),i(1,"table",4)(2,"thead",5)(3,"tr",6)(4,"th",7),o(5,"Item Code"),r(),i(6,"th",7),o(7,"Reference"),r(),i(8,"th",7),o(9,"Record Date"),r(),i(10,"th",7),o(11,"Qty In"),r(),i(12,"th",7),o(13,"Qty Out"),r(),i(14,"th",7),o(15,"Price"),r()()(),i(16,"tbody"),s(17,D,15,12,"tr",8),r()(),s(18,M,1,0,"div",9),x()),a&2){let n=m.$implicit,t=m.last;l(17),p("ngForOf",n),l(),p("ngIf",!t)}}function R(a,m){if(a&1&&(i(0,"div",1),f(1,"br"),i(2,"h2",2),o(3,"Bin Card Report"),r(),s(4,w,19,2,"ng-container",3),r()),a&2){let n=v();l(4),p("ngForOf",n.chunkedSupplierRecords)}}var E=(()=>{class a{constructor(n,t){this.route=n,this.bincardservice=t,this.filter={code:"",name:"",dateRange:{start:null,end:null}},this.supplier=[],this.chunkedSupplierRecords=[],this.totalItems=0,this.totalPages=0,this.pageSize=10}ngOnInit(){let n={},t=this.route.snapshot.queryParams;if(t.grncode&&(this.filter.code=t.grncode,n["itemCode.contains"]=this.filter.code),t.grnname&&(this.filter.name=t.grnname,n["reference.contains"]=this.filter.name),t.grndaterange){let[e,d]=t.grndaterange.split("|");e&&(this.filter.dateRange.start=new Date(e),n["recordDate.greaterThanOrEqual"]=this.formatDate(this.filter.dateRange.start,"start")),d&&(this.filter.dateRange.end=new Date(d),n["recordDate.lessThanOrEqual"]=this.formatDate(this.filter.dateRange.end,"end"))}n.size=2e7,this.bincardservice.query(n).subscribe({next:e=>{this.supplier=e.body||[],this.chunkedSupplierRecords=this.chunkArray(this.supplier,50);let d=e.headers.get("X-Total-Count");this.totalItems=d?+d:0,this.totalPages=Math.ceil(this.totalItems/this.pageSize)},error:e=>{console.error("Error fetching supplier data:",e)}}),setTimeout(()=>{window.print()},1e3)}chunkArray(n,t){let e=[];for(let d=0;d<n.length;d+=t)e.push(n.slice(d,d+t));return e}formatDate(n,t){let e=new Date(n);return t==="start"?e.setHours(0,0,0,0):e.setHours(23,59,59,999),e.toISOString()}static{this.\u0275fac=function(t){return new(t||a)(g(I),g(O))}}static{this.\u0275cmp=b({type:a,selectors:[["app-bincard-print"]],decls:1,vars:1,consts:[["class","p-4",4,"ngIf"],[1,"p-4"],[1,"text-center","text-lg","font-semibold","mb-4"],[4,"ngFor","ngForOf"],["cellspacing","0","cellpadding","6",1,"min-w-[1000px]","w-[70%]","mx-auto","text-sm","border","border-black","border-collapse","table-fixed","mb-6"],[1,"bg-gray-100","border","border-black"],[1,"text-center","font-semibold","border","border-black"],[1,"border","border-black","p-1"],["class","text-center border border-black",4,"ngFor","ngForOf"],["class","page-break",4,"ngIf"],[1,"text-center","border","border-black"],[1,"border","border-black","text-left","p-1"],[1,"border","border-black","p-1","text-right"],[1,"page-break"]],template:function(t,e){t&1&&s(0,R,5,1,"div",0),t&2&&p("ngIf",e.chunkedSupplierRecords.length>0)},dependencies:[P,C,y,k,S],styles:["@media print{@page{size:A4 portrait;margin:20mm}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:210mm;height:297mm;margin:0;padding:0;color-adjust:exact!important;-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important}body[_ngcontent-%COMP%]{font-size:12px}table[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{page-break-inside:auto!important;break-inside:auto!important}.page-break[_ngcontent-%COMP%]{page-break-after:always}table.min-w-\\__ph-0__[_ngcontent-%COMP%]{min-width:auto!important;width:70%!important;margin-left:auto;margin-right:auto}}"]})}}return a})();var H=[{path:"",component:E}];export{H as default};
