import{a as V}from"./chunk-PMESUWSZ.js";import{a as q}from"./chunk-GTGBE7YF.js";import{a as z}from"./chunk-M5AHF4UO.js";import{a as L}from"./chunk-CI6T4FGN.js";import"./chunk-RHLCCWT6.js";import{a as H}from"./chunk-E4TC4E2W.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-QJXHZJQJ.js";import{a as $}from"./chunk-NKWJDJWK.js";import{a as G}from"./chunk-3N5N6CVQ.js";import"./chunk-YK5MGRE7.js";import"./chunk-OT3AQSDR.js";import"./chunk-KKTU7MAV.js";import"./chunk-5RBAZJQA.js";import"./chunk-6F4FOUKE.js";import{b as j,c as B}from"./chunk-PNSBUHWU.js";import"./chunk-GRVU3NMS.js";import"./chunk-JTAP5U5F.js";import{d as D}from"./chunk-VPJKTFM7.js";import"./chunk-GXFYRQIF.js";import"./chunk-T4I3R2GV.js";import{b as F,d as A}from"./chunk-DJWEABC6.js";import{h as T,i as w,j as M,n as N,p as O,q as k,r as R}from"./chunk-MZLVPJ5Q.js";import{Bc as o,Cc as I,Db as C,Dc as c,Jc as S,Kb as g,Lc as _,Qc as f,Sc as h,Tb as s,cc as n,dc as r,ec as v,fc as y,gc as E,nb as a,oa as b,ob as d,oc as P,qc as l}from"./chunk-2GFQMTJ2.js";var X=()=>["part","repair","fitting_charge","paint","other"],U=(i,m)=>({"w-1/4":i,"w-1/2":m}),x=(i,m)=>({"w-1/6":i,"w-1/4":m});function Y(i,m){i&1&&(n(0,"th",29),o(1," S/H "),r())}function Z(i,m){i&1&&(n(0,"th",29),o(1," Market Price "),r())}function ee(i,m){if(i&1&&(n(0,"th",26),o(1," Estimate Price "),r()),i&2){let e=l(2).$implicit;s("ngClass",_(1,x,e==="part",e!=="part"))}}function te(i,m){if(i&1&&(n(0,"td",33),o(1),r()),i&2){let e=l().$implicit;a(),c(" ",e.sh," ")}}function ie(i,m){if(i&1&&(n(0,"td",33),o(1),f(2,"currency"),r()),i&2){let e=l().$implicit;a(),c(" ",h(2,1,e.marketPrice," ")," ")}}function ne(i,m){if(i&1&&(n(0,"td",30),o(1),f(2,"currency"),r()),i&2){let e=l().$implicit,p=l(2).$implicit;s("ngClass",_(5,x,p==="part",p!=="part")),a(),c(" ",h(2,2,e.price," ")," ")}}function re(i,m){if(i&1&&(n(0,"tr")(1,"td",25),o(2),f(3,"number"),r(),n(4,"td",30),o(5),r(),g(6,te,2,1,"td",31)(7,ie,3,4,"td",31)(8,ne,3,8,"td",32),n(9,"td",30),o(10),r()()),i&2){let e=m.$implicit,p=m.index,t=l(2).$implicit;a(2),I(h(3,8,p+1,"2.0")),a(2),s("ngClass",_(11,U,t==="part",t!=="part")),a(),c(" ",e.works," "),a(),s("ngIf",t==="part"),a(),s("ngIf",t==="part"),a(),s("ngIf",t!="part"),a(),s("ngClass",_(14,x,t==="part",t!=="part")),a(),c(" ",e.approvedPrice," ")}}function ae(i,m){if(i&1&&(n(0,"div",21)(1,"h2",22),o(2),r(),n(3,"table",23)(4,"thead",24)(5,"tr")(6,"th",25),o(7,"#"),r(),n(8,"th",26),o(9," Work "),r(),g(10,Y,2,0,"th",27)(11,Z,2,0,"th",27)(12,ee,2,4,"th",28),n(13,"th",26),o(14," Amended Price "),r()()(),n(15,"tbody"),g(16,re,11,17,"tr",19),r()()()),i&2){let e=l().$implicit,p=l();a(2),c(" ",e==="part"?"SPARE PARTS":e==="repair"?"REPAIRING":e==="fitting_charge"?"FITTING CHARGERS":e==="paint"?"PAINTING":e==="other"?"OTHERS":e," "),a(6),s("ngClass",_(7,U,e==="part",e!=="part")),a(2),s("ngIf",e==="part"),a(),s("ngIf",e==="part"),a(),s("ngIf",e!="part"),a(),s("ngClass",_(10,x,e==="part",e!=="part")),a(3),s("ngForOf",p.formLines[e])}}function oe(i,m){if(i&1&&(y(0),g(1,ae,17,13,"div",20),E()),i&2){let e=m.$implicit,p=l();a(),s("ngIf",(p.formLines[e]==null?null:p.formLines[e].length)>0)}}var W=(()=>{class i{constructor(e,p,t,u,J,K,Q){this._estimateTreatmentService=e,this._preEstimateService=p,this._estimateService=t,this._selectedCardService=u,this._vehicleTreatmentRegistryService=J,this._route=K,this._snackBarService=Q,this._fuseNavigationService=b($),this.estimateID=0,this.isInsurance=!1,this.estimateTreatments=[],this.router=b(A),this.formLines={part:[],fitting_charge:[],repair:[],paint:[],other:[]},this._fuseNavigationService.getComponent("mainNavigation").close()}ngOnInit(){let e=this._route.snapshot.paramMap.get("id");this.estimateID=Number(e),e&&(this._estimateService.find(Number(e)).subscribe(p=>{p.body&&(this.estimate=p.body,this.insuranceProviderID=p.body.insuranceID,this.insuranceProvider=p.body.insuranceName,this.numberOfPanels=p.body.numberOfPanels,this.vehicleNo=p.body.licenseNo)}),this._estimateTreatmentService.query({"estimateId.equals":`${e}`}).subscribe(p=>{console.log("Estimate Treatments:",p.body),this.estimateTreatments=p.body||[],this.estimateTreatments.length>0&&this.estimateTreatments.forEach(t=>{let u=this.mapTreatmentTypeToSection(t.treatmentType);u&&this.formLines[u].push({id:t.id,works:t.partName||t.repairName||t.paintName||t.fittingChargeName||t.other||"",quantity:t.quantity,type:t.type,marketPrice:t.marketPrice,sh:t.sh,priceType:t.priceType,customPrice:t.customPrice,price:t.price})})}))}mapTreatmentTypeToSection(e){switch(e.toUpperCase()){case"PART":return"part";case"REPAIR":return"repair";case"PAINT":return"paint";case"FITTING_CHARGE":return"fitting_charge";case"OTHER":return"other";default:return null}}print(){window.print()}goBack(){this.router.navigate(["/view-estimate",this.estimateID])}static{this.\u0275fac=function(p){return new(p||i)(d(z),d(q),d(L),d(G),d(V),d(F),d(H))}}static{this.\u0275cmp=C({type:i,selectors:[["app-pre-estimate-print"]],decls:53,vars:13,consts:[["id","print-section",1,"w-full","h-full","fixed","top-0","left-0","z-50","bg-white","p-10","text-sm","text-gray-800","print:block","overflow-auto"],[1,"flex","space-x-4","mb-6","no-print"],[1,"px-4","py-2","bg-gradient-to-r","from-gray-500","to-gray-700","hover:from-gray-600","hover:to-gray-800","rounded-lg","shadow","text-white","flex","items-center","transition-all","duration-200",3,"click"],[1,"icon-size-4","text-white",3,"svgIcon"],[1,"ml-2"],[1,"px-4","py-2","bg-gradient-to-r","from-rose-500","to-red-500","hover:from-rose-600","hover:to-red-600","rounded-lg","shadow","text-white","flex","items-center","transition-all","duration-200",3,"click"],[1,"p-6","text-sm","text-gray-800"],[1,"text-center","mb-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-right"],[1,"border-white","mt-40"],[1,"flex","justify-between","text-sm","ml-20","mr-30"],[1,"text-left"],[1,"uppercase"],[1,"ml-3"],[1,"ml-1"],[1,"ml-11"],[1,"ml-8"],[1,"text-lg","font-bold","text-center","underline","mb-5"],[4,"ngFor","ngForOf"],["class","mb-8",4,"ngIf"],[1,"mb-8"],[1,"text-lg","font-bold","uppercase","mb-2","border-b","pb-1"],[1,"w-full","border","border-collapse","border-gray-400","text-left","text-sm","table-fixed"],[1,"bg-gray-100"],[1,"border","p-2","w-[60px]"],[1,"border","p-2","uppercase",3,"ngClass"],["class","border p-2 w-1/6 uppercase",4,"ngIf"],["class","border p-2 uppercase",3,"ngClass",4,"ngIf"],[1,"border","p-2","w-1/6","uppercase"],[1,"border","p-2",3,"ngClass"],["class","border p-2 w-1/6",4,"ngIf"],["class","border p-2",3,"ngClass",4,"ngIf"],[1,"border","p-2","w-1/6"]],template:function(p,t){p&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),P("click",function(){return t.goBack()}),v(3,"mat-icon",3),n(4,"span",4),o(5,"Back"),r()(),n(6,"button",5),P("click",function(){return t.print()}),v(7,"mat-icon",3),n(8,"span",4),o(9,"Print"),r()()(),n(10,"div",6)(11,"div",7)(12,"div",8),v(13,"div")(14,"div",9),r(),v(15,"hr",10),n(16,"div",11)(17,"div",12)(18,"p",13)(19,"strong"),o(20,"Insurance"),r(),n(21,"span",14),o(22),r()(),n(23,"p",13)(24,"strong"),o(25,"Vehicle No"),r(),n(26,"span",14),o(27),r()(),n(28,"p",13)(29,"strong"),o(30,"Contact No"),r(),n(31,"span",15),o(32),r()()(),n(33,"div",12)(34,"p",13)(35,"strong"),o(36,"Date"),r(),n(37,"span",16),o(38),f(39,"date"),r()(),n(40,"p",13)(41,"strong"),o(42,"Model"),r(),n(43,"span",17),o(44),r()(),n(45,"p",13)(46,"strong"),o(47,"Customer"),r(),n(48,"span",4),o(49),r()()()()(),n(50,"h2",18),o(51," ESTIMATE FOR ACCIDENT REPAIRING "),r(),g(52,oe,2,1,"ng-container",19),r()()),p&2&&(a(3),s("svgIcon","mat_outline:arrow_back"),a(4),s("svgIcon","mat_outline:print"),a(15),c(": ",t.insuranceProvider,""),a(5),c(": ",t.vehicleNo,""),a(5),c(": ",t.estimate==null?null:t.estimate.vehicleOwnerContactNumber1,""),a(6),c(": ",h(39,9,t.estimate==null?null:t.estimate.createdDate,"medium"),""),a(6),c(": ",t.estimate==null?null:t.estimate.vehicleModel,""),a(5),c(": ",t.estimate==null?null:t.estimate.vehicleOwnerName,""),a(3),s("ngForOf",S(12,X)))},dependencies:[R,T,w,M,O,k,N,D,B,j],styles:["@media print{body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow:visible!important}body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}#print-section[_ngcontent-%COMP%], #print-section[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}#print-section[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:auto!important;overflow:visible!important;-ms-overflow-style:none;scrollbar-width:none}#print-section[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.no-print[_ngcontent-%COMP%]{display:none!important}table[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{page-break-inside:avoid!important;break-inside:avoid!important}div[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{page-break-inside:auto}}"]})}}return i})();var Te=[{path:"",component:W}];export{Te as default};
