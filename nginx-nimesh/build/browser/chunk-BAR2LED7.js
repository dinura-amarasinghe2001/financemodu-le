import{a as V}from"./chunk-6WEKFNCT.js";import"./chunk-VQIWVYPK.js";import"./chunk-7RWLPLTW.js";import{a as G}from"./chunk-7KFYK36W.js";import{c as pe}from"./chunk-XGCX3TDA.js";import{a as ee,b as te,c as ie,d as oe,e as ae,f as ne,g as le,h as re,i as me,j as se,k as ce,l as de}from"./chunk-4HPTI4QK.js";import{a as K,b as Y,c as Z}from"./chunk-Z5CSESBH.js";import{a as b,b as fe}from"./chunk-4IV6I57G.js";import{b as he}from"./chunk-T73PE35A.js";import{h as ue}from"./chunk-ZGGKBBB7.js";import{a as J}from"./chunk-E4TC4E2W.js";import"./chunk-YEGTZ3HQ.js";import{a as j}from"./chunk-QQNGDF4M.js";import"./chunk-YK5MGRE7.js";import"./chunk-OT3AQSDR.js";import"./chunk-HN3GTZ22.js";import"./chunk-2V7PXVXU.js";import"./chunk-4WAQRQWE.js";import"./chunk-KKTU7MAV.js";import"./chunk-5RBAZJQA.js";import{J as L,K as U,O as X,P as W,d as P,i as z,j as F,l as $,q,u as Q,z as O}from"./chunk-MXRUEL7B.js";import{b as N,c as B}from"./chunk-PNSBUHWU.js";import{c as E,g as k}from"./chunk-TEYA6QDP.js";import"./chunk-JTAP5U5F.js";import{a as A,d as H}from"./chunk-VPJKTFM7.js";import"./chunk-GXFYRQIF.js";import"./chunk-T4I3R2GV.js";import{r as T}from"./chunk-MZLVPJ5Q.js";import{Aa as _,Bc as m,Db as y,Dc as u,Jc as R,Kb as d,Tb as s,cc as a,dc as n,ec as p,fc as h,gc as f,ic as x,nb as r,oa as M,ob as C,oc as v,qc as S,uc as w,vc as D,wc as I,za as g}from"./chunk-2GFQMTJ2.js";var _e=()=>[5,10,20];function Ce(e,l){e&1&&(a(0,"th",27),m(1," ID "),n())}function ve(e,l){if(e&1&&(a(0,"td",28),m(1),n()),e&2){let t=l.$implicit;r(),u(" ",t.id," ")}}function be(e,l){e&1&&(a(0,"th",27),m(1," Model "),n())}function xe(e,l){if(e&1&&(a(0,"td",28),m(1),n()),e&2){let t=l.$implicit;r(),u(" ",t.model," ")}}function Se(e,l){e&1&&(a(0,"th",27),m(1," Brand "),n())}function Ve(e,l){if(e&1&&(a(0,"td",28),m(1),n()),e&2){let t=l.$implicit;r(),u(" ",t.brand," ")}}function Me(e,l){e&1&&(a(0,"th",27),m(1," License No "),n())}function ye(e,l){if(e&1&&(a(0,"td",28),m(1),n()),e&2){let t=l.$implicit;r(),u(" ",t.licenseNo," ")}}function we(e,l){e&1&&p(0,"th",29)}function De(e,l){if(e&1){let t=x();a(0,"td",28)(1,"button",30),v("click",function(){let i=g(t).$implicit,c=S();return _(c.openVehicleEditDialog(i))}),m(2," Update "),n(),a(3,"button",31),v("click",function(){let i=g(t).$implicit,c=S();return _(c.deleteVehicle(i))}),m(4," Delete "),n()()}}function Ie(e,l){e&1&&p(0,"tr",32)}function Re(e,l){e&1&&p(0,"tr",33)}var ge=(()=>{class e{constructor(t,o,i){this._vehicleRegistryService=t,this._dialogService=o,this._snackBarService=i,this.dataSource=new de,this.searchInputControl=new Q,this.allVehicleDetails=[],this.noRecord=!1,this.displayedColumns=["id","model","brand","licenseNo","action"],this.itemsPerPage=10,this.totalItems=0,this.page=1,this._fuseConfirmationService=M(j),this.searchInputControl.valueChanges.subscribe(c=>{this.page=0,this.searchVehicle()})}ngOnInit(){this.getAllVehicleDetails()}ngAfterViewInit(){this._paginator.page.subscribe(()=>{this.page=this._paginator.pageIndex+1,this.itemsPerPage=this._paginator.pageSize,this.getAllVehicleDetails()})}getAllVehicleDetails(){let t={page:this.page-1,size:this.itemsPerPage};this._vehicleRegistryService.query(t).subscribe(o=>{o.body?(this.dataSource.data=o.body,this.totalItems=Number(o.headers.get("X-Total-Count"))):this.dataSource.data=[],this.noRecord=this.dataSource.data.length===0})}searchVehicle(){let t=this.searchInputControl.value?.trim();if(!t){this.getAllVehicleDetails();return}let o={page:this.page,size:this.itemsPerPage,"licenseNo.contains":t};this._vehicleRegistryService.query(o).subscribe(i=>{this.totalItems=Number(i.headers.get("X-Total-Count")),this.dataSource.data=i.body||[],this.noRecord=this.dataSource.data.length===0})}openVehicleEditDialog(t){this._dialogService.open(V,{width:"80vh",maxHeight:"90vh",data:{vehicle:t}}).afterClosed().subscribe(i=>{i&&(this._snackBarService.open("Vehicle Updated Successfully!","Close",{duration:3e3}),this.getAllVehicleDetails())})}deleteVehicle(t){this._fuseConfirmationService.open({title:"Delete Vehicle",message:"Are you sure you want to delete this vehicle? This action cannot be undone!",icon:{name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{label:"Delete",color:"warn"}}}).afterClosed().subscribe(i=>{i==="confirmed"&&this._vehicleRegistryService.delete(t.id).subscribe(()=>{this.getAllVehicleDetails()})})}openVehicleCreateDialog(){this._dialogService.open(V,{width:"80vh",maxHeight:"90vh"}).afterClosed().subscribe(o=>{o&&(this._snackBarService.open("Vehicle Created Successfully!","Close",{duration:3e3}),this.getAllVehicleDetails())})}static{this.\u0275fac=function(o){return new(o||e)(C(G),C(E),C(J))}}static{this.\u0275cmp=y({type:e,selectors:[["app-vehicles"]],viewQuery:function(o,i){if(o&1&&w(b,5),o&2){let c;D(c=I())&&(i._paginator=c.first)}},decls:36,vars:14,consts:[["paginator",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-default","flex","flex-0","flex-col","p-6","pb-22","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-28","sm:pt-12"],[1,"min-w-0","flex-1"],[1,"mt-2"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-3",3,"click","color"],[1,"icon-size-4",3,"svgIcon"],[1,"ml-2"],[1,"example-table-container","bg-card","-mt-16","h-full","rounded-t-2xl","shadow","overflow-auto"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-auto"],["mat-table","","matSort","",1,"w-full","table-fixed","border-separate","border-spacing-y-2","px-6",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-cell","","class","px-4 py-2",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","brand"],["matColumnDef","licenseNo"],["matColumnDef","action"],["mat-header-cell","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"bottom-0","justify-self-end",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold"],["mat-cell","",1,"px-4","py-2"],["mat-header-cell","",1,"px-4","py-3","text-left","font-semibold"],["mat-flat-button","","color","primary",1,"fuse-mat-button-large","mr-2",3,"click"],["mat-flat-button","","color","warn",1,"fuse-mat-button-large",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(o&1){let c=x();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),m(5," Vehicles "),n()()(),a(6,"div",6)(7,"mat-form-field",7),p(8,"mat-icon",8)(9,"input",9),n(),a(10,"button",10),v("click",function(){return g(c),_(i.openVehicleCreateDialog())}),p(11,"mat-icon",11),a(12,"span",12),m(13,"Register New Vehicle"),n()()()(),a(14,"div",13)(15,"div",14)(16,"table",15),h(17,16),d(18,Ce,2,0,"th",17)(19,ve,2,1,"td",18),f(),h(20,19),d(21,be,2,0,"th",17)(22,xe,2,1,"td",18),f(),h(23,20),d(24,Se,2,0,"th",17)(25,Ve,2,1,"td",18),f(),h(26,21),d(27,Me,2,0,"th",17)(28,ye,2,1,"td",18),f(),h(29,22),d(30,we,1,0,"th",23)(31,De,5,0,"td",18),f(),d(32,Ie,1,0,"tr",24)(33,Re,1,0,"tr",25),n()()(),p(34,"mat-paginator",26,0),n()}o&2&&(r(7),s("subscriptSizing","dynamic"),r(),s("svgIcon","heroicons_solid:magnifying-glass"),r(),s("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Search Vehicles"),r(),s("color","primary"),r(),s("svgIcon","heroicons_mini:plus"),r(5),s("dataSource",i.dataSource),r(16),s("matHeaderRowDef",i.displayedColumns),r(),s("matRowDefColumns",i.displayedColumns),r(),s("length",i.totalItems)("pageSize",i.itemsPerPage)("pageSizeOptions",R(13,_e)))},dependencies:[T,B,N,H,A,Z,K,Y,k,L,$,q,U,O,ce,ee,ie,le,oe,te,re,ae,ne,me,se,F,z,P,W,X,pe,fe,b,ue,he],encapsulation:2})}}return e})();var st=[{path:"",component:ge}];export{st as default};
