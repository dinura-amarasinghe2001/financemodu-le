import{a as ke}from"./chunk-5B6KG46D.js";import{a as R}from"./chunk-7T3DP6DK.js";import{d as Be}from"./chunk-MBFKKYVB.js";import"./chunk-2BGIWFS4.js";import{a as De,b as Me}from"./chunk-JCUL3757.js";import"./chunk-R44K775J.js";import{a as ye}from"./chunk-PH6QFVW6.js";import{a as ve}from"./chunk-IXCLTE66.js";import{a as ne,b as ae,c as re,d as oe,e as le,f as se,g as de,h as me,i as pe,j as ce,k as fe}from"./chunk-4HPTI4QK.js";import{a as he,b as ge}from"./chunk-4IV6I57G.js";import{b as ue}from"./chunk-T73PE35A.js";import{c as _e,d as Ce,e as Se,f as xe,g as be,h as we}from"./chunk-ZGGKBBB7.js";import{a as ie}from"./chunk-E4TC4E2W.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-OT3AQSDR.js";import"./chunk-4WAQRQWE.js";import"./chunk-HLRQKUHW.js";import"./chunk-5RBAZJQA.js";import{J as Z,O as ee,P as te,d as j,e as W,i as $,j as Q,l as K,q as U,w as Y}from"./chunk-MXRUEL7B.js";import{b as G,c as J}from"./chunk-PNSBUHWU.js";import{c as A}from"./chunk-TEYA6QDP.js";import"./chunk-JTAP5U5F.js";import{a as L,d as X}from"./chunk-VPJKTFM7.js";import{W as N}from"./chunk-GXFYRQIF.js";import"./chunk-T4I3R2GV.js";import{d as O,i as q}from"./chunk-DJWEABC6.js";import{j as z,n as F,r as H}from"./chunk-MZLVPJ5Q.js";import{Aa as c,Ac as B,Bc as s,Db as E,Dc as C,Fc as D,Gc as M,Hc as k,Jc as I,Kb as f,Qc as T,Sc as P,Tb as m,Tc as V,Vb as v,cc as a,dc as o,ec as u,fc as h,gc as g,ic as y,nb as l,oa as b,ob as w,oc as _,qc as S,za as p}from"./chunk-2GFQMTJ2.js";var Ie=()=>[5,10,20];function Te(t,r){if(t&1){let e=y();h(0),u(1,"mat-icon",40),a(2,"input",41),_("ngModelChange",function(i){p(e);let d=S();return c(d.searchByCode?d.filter.code=i:d.filter.name=i)})("keydown.enter",function(){p(e);let i=S();return c(i.loadSuppliers())}),o(),g()}if(t&2){let e=S();l(),m("svgIcon",e.searchByCode?"mat_outline:qr_code_scanner":"heroicons_solid:magnifying-glass"),l(),m("placeholder",e.searchByCode?"Search by Code":"Search by Name")("ngModel",e.searchByCode?e.filter.code:e.filter.name)}}function Pe(t,r){if(t&1){let e=y();a(0,"mat-date-range-input",42)(1,"input",43),k("ngModelChange",function(i){p(e);let d=S();return M(d.filter.dateRange.start,i)||(d.filter.dateRange.start=i),c(i)}),_("dateChange",function(){p(e);let i=S();return c(i.onDateChange())}),o(),a(2,"input",44),k("ngModelChange",function(i){p(e);let d=S();return M(d.filter.dateRange.end,i)||(d.filter.dateRange.end=i),c(i)}),_("dateChange",function(){p(e);let i=S();return c(i.onDateChange())}),o()(),u(3,"mat-datepicker-toggle",45)(4,"mat-date-range-picker",null,1)}if(t&2){let e=B(5),n=S();m("rangePicker",e),l(),D("ngModel",n.filter.dateRange.start),l(),D("ngModel",n.filter.dateRange.end),l(),m("for",e)}}function Ve(t,r){t&1&&(a(0,"th",46),s(1," Code "),o())}function ze(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.itemCode," ")}}function Fe(t,r){t&1&&(a(0,"th",46),s(1," ID "),o())}function He(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.id," ")}}function Oe(t,r){t&1&&(a(0,"th",46),s(1," Item name "),o())}function qe(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.reference," ")}}function Ne(t,r){t&1&&(a(0,"th",46),s(1," Quantity Out "),o())}function Ae(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.qtyOut," ")}}function je(t,r){t&1&&(a(0,"th",46),s(1," Quantity In "),o())}function We(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.qtyIn," ")}}function $e(t,r){t&1&&(a(0,"th",46),s(1," Description "),o())}function Qe(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.description," ")}}function Le(t,r){t&1&&(a(0,"th",46),s(1," Price "),o())}function Xe(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.price," ")}}function Ge(t,r){t&1&&(a(0,"th",46),s(1," Avail.Qty "),o())}function Je(t,r){if(t&1&&(a(0,"td",47),s(1),o()),t&2){let e=r.$implicit;l(),C(" ",e.opening," ")}}function Ke(t,r){t&1&&(a(0,"th",46),s(1," Record Date "),o())}function Ue(t,r){if(t&1&&(a(0,"td",47),s(1),T(2,"date"),o()),t&2){let e=r.$implicit;l(),C(" ",P(2,1,e.recordDate,"yyyy-MM-dd HH:mm:ss")," ")}}function Ye(t,r){t&1&&u(0,"th",48)}function Ze(t,r){t&1&&u(0,"td",47)}function et(t,r){t&1&&u(0,"tr",49)}function tt(t,r){t&1&&u(0,"tr",50)}var Re=(()=>{class t{refreshFilters(){this.filter.code="",this.filter.name="",this.filter.dateRange={start:null,end:null},this.searchByCode=!0,this.showDateRange=!1,this.loadSuppliers()}onDateChange(){console.log(this.filter.dateRange.start),console.log(this.filter.dateRange.end),this.filter.dateRange.start&&this.filter.dateRange.end&&this.loadSuppliers()}openSupplierViewDialog(e){this._dialogService.open(R,{data:{id:e}})}toggleDetails(e){this.supplierbankacc.find(e).subscribe({next:n=>{console.log("Bank Account:",n)},error:n=>console.error("Bank Account error:",n)}),this.supplierbank.find(e).subscribe({next:n=>{console.log("Bank:",n)},error:n=>console.error("Bank error:",n)}),this.supservice.find(e).subscribe({next:n=>{console.log("Supplier:",n)},error:n=>console.error("Supplier error:",n)})}onPaginateChange(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex+1,this.loadSuppliers()}deleteSupplier(e){this.supplierbankacc.delete(e).subscribe({next:()=>{this.supplierbank.delete(e).subscribe({next:()=>{this.supservice.delete(e).subscribe({next:()=>{this._snackBarService.open("Supplier deleted successfully!","Close",{duration:3e3}),this.loadSuppliers()},error:n=>{console.error("Supplier delete failed",n),this._snackBarService.open("Supplier delete failed","Close",{duration:3e3})}})},error:n=>{console.error("Supplier bank delete failed",n),this._snackBarService.open("Supplier bank delete failed","Close",{duration:3e3})}})},error:n=>{console.error("Supplier bank account delete failed",n),this._snackBarService.open("Supplier bank account delete failed","Close",{duration:3e3})}})}ngOnInit(){this.loadSuppliers()}onFilterChange(){this.showDateRange?(this.filter.name="",this.filter.code=""):(this.searchByCode?this.filter.name="":this.filter.code="",this.filter.dateRange.start=null,this.filter.dateRange.end=null),this.loadSuppliers()}get displayedColumns(){let e=["code","vehicleOwnerName","vehicleBrand","description","qtyOut","vehicleModel","referenceDoc","recdate","action"];return this.showId&&e.unshift("id"),e}constructor(e,n,i){this._dialogService=e,this._snackBarService=n,this.router=i,this.supservice=b(ye),this.bincardservice=b(ve),this.supplierbank=b(Me),this.supplierbankacc=b(De),this.supplier=[],this.currentPage=1,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.searchByCode=!1,this.filter={name:"",code:"",dateRange:{start:null,end:null}},this.selectedSupplierId=3,this.itemsPerPage=10,this.showDateRange=!1,this.showId=!1}onAddMore(){let e={};this.showDateRange&&this.filter.dateRange.start&&this.filter.dateRange.end?e.grndaterange=`${this.filter.dateRange.start}|${this.filter.dateRange.end}`:this.searchByCode&&this.filter.code?e.grncode=this.filter.code:!this.searchByCode&&this.filter.name&&(e.grnname=this.filter.name),this.router.navigate(["/bin-card-print"],{queryParams:e})}openVehicleCreateDialog(){this._dialogService.open(ke,{width:"80vh",maxHeight:"95vh"}).afterClosed().subscribe(n=>{n&&this._snackBarService.open("Vehicle Created Successfully!","Close",{duration:3e3})})}viewopenSupplierViewDialog(e){this._dialogService.open(R,{data:{id:e}})}loadSuppliers(){let e={page:this.currentPage-1,size:this.pageSize,sort:["id,desc"]};this.filter.name?.trim()&&(e["reference.contains"]=this.filter.name.trim()),this.filter.code?.trim()&&(e["itemCode.contains"]=this.filter.code.trim()),this.filter.dateRange.start&&(e["recordDate.greaterThanOrEqual"]=this.formatDate(this.filter.dateRange.start,"start")),this.filter.dateRange.end&&(e["recordDate.lessThanOrEqual"]=this.formatDate(this.filter.dateRange.end,"end")),this.bincardservice.query(e).subscribe({next:n=>{this.supplier=n.body||[];let i=n.headers.get("X-Total-Count");this.totalItems=i?+i:0,this.totalPages=Math.ceil(this.totalItems/this.pageSize)},error:n=>{console.error("Error fetching supplier data:",n)}})}formatDate(e,n){let i=new Date(e);return n==="start"?i.setHours(0,0,0,0):i.setHours(23,59,59,999),i.toISOString()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadSuppliers())}nextPage(){this.goToPage(this.currentPage+1)}previousPage(){this.goToPage(this.currentPage-1)}onSearch(){this.currentPage=1,this.loadSuppliers()}onRowCountChange(){this.currentPage=1,this.loadSuppliers()}viewSupplier(e){console.log("Viewing supplier:",e)}static{this.\u0275fac=function(n){return new(n||t)(w(A),w(ie),w(O))}}static{this.\u0275cmp=E({type:t,selectors:[["app-bin-card"]],decls:65,vars:27,consts:[["dateRangePicker",""],["rangePicker",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-default","flex","flex-0","flex-col","p-6","pb-22","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-23","sm:pt-13"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"mt-6","flex","flex-wrap","gap-3","items-center","sm:ml-4","sm:mt-0"],[1,"flex","gap-2"],["aria-label","Search by Code",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400",3,"click"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-lg","bg-indigo-100","text-indigo-800","dark:bg-indigo-600","dark:text-indigo-50"],[1,"text-2xl",3,"svgIcon"],["aria-label","Search by Name",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400",3,"click"],["aria-label","Toggle Date Filter",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400",3,"click"],["aria-label","Refresh Filters","title","Clear filters and reload",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400","bg-gray-300",3,"click"],["svgIcon","mat_outline:refresh",1,"text-2xl"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],[4,"ngIf","ngIfElse"],["mat-flat-button","","color","primary",1,"ml-3",3,"click"],[1,"icon-size-4",3,"svgIcon"],[1,"ml-2"],[1,"example-table-container","bg-card","-mt-16","h-full","rounded-t-2xl","shadow","overflow-auto",2,"min-height","0"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-auto"],["mat-table","","matSort","",1,"w-full","table-fixed","border-separate","border-spacing-y-2",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-cell","","class","px-4 py-2",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","vehicleOwnerName"],["matColumnDef","qtyOut"],["matColumnDef","vehicleBrand"],["matColumnDef","description"],["matColumnDef","vehicleModel"],["matColumnDef","referenceDoc"],["matColumnDef","recdate"],["matColumnDef","action"],["mat-header-cell","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","color","primary",1,"fixed","bottom-4","right-20","z-50","w-48","h-16","font-semibold","rounded-xl","shadow-lg",3,"click"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","autocomplete","off",3,"ngModelChange","keydown.enter","placeholder","ngModel"],[3,"rangePicker"],["matStartDate","","placeholder","From date","name","startDate",3,"ngModelChange","dateChange","ngModel"],["matEndDate","","placeholder","To date","name","endDate",3,"ngModelChange","dateChange","ngModel"],["matSuffix","",3,"for"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold"],["mat-cell","",1,"px-4","py-2"],["mat-header-cell","",1,"px-4","py-3","text-left","font-semibold"],["mat-header-row",""],["mat-row",""]],template:function(n,i){if(n&1){let d=y();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2",5),s(4," Bin Card "),o()(),a(5,"div",6)(6,"div",7)(7,"button",8),_("click",function(){return p(d),i.searchByCode=!0,c(i.showDateRange=!1)}),a(8,"div",9),u(9,"mat-icon",10),o()(),a(10,"button",11),_("click",function(){return p(d),i.searchByCode=!1,c(i.showDateRange=!1)}),a(11,"div",9),u(12,"mat-icon",10),o()(),a(13,"button",12),_("click",function(){return p(d),c(i.showDateRange=!i.showDateRange)}),a(14,"div",9),u(15,"mat-icon",10),o()(),a(16,"button",13),_("click",function(){return p(d),c(i.refreshFilters())}),a(17,"div",9),u(18,"mat-icon",14),o()()(),a(19,"mat-form-field",15),f(20,Te,3,3,"ng-container",16)(21,Pe,6,4,"ng-template",null,0,V),o(),a(23,"button",17),_("click",function(){return p(d),c(i.onFilterChange())}),u(24,"mat-icon",18),a(25,"span",19),s(26,"Search"),o()()()(),a(27,"div",20)(28,"div",21)(29,"table",22),h(30,23),f(31,Ve,2,0,"th",24)(32,ze,2,1,"td",25),g(),h(33,26),f(34,Fe,2,0,"th",24)(35,He,2,1,"td",25),g(),h(36,27),f(37,Oe,2,0,"th",24)(38,qe,2,1,"td",25),g(),h(39,28),f(40,Ne,2,0,"th",24)(41,Ae,2,1,"td",25),g(),h(42,29),f(43,je,2,0,"th",24)(44,We,2,1,"td",25),g(),h(45,30),f(46,$e,2,0,"th",24)(47,Qe,2,1,"td",25),g(),h(48,31),f(49,Le,2,0,"th",24)(50,Xe,2,1,"td",25),g(),h(51,32),f(52,Ge,2,0,"th",24)(53,Je,2,1,"td",25),g(),h(54,33),f(55,Ke,2,0,"th",24)(56,Ue,3,4,"td",25),g(),h(57,34),f(58,Ye,1,0,"th",35)(59,Ze,1,0,"td",25),g(),f(60,et,1,0,"tr",36)(61,tt,1,0,"tr",37),o(),a(62,"button",38),_("click",function(){return p(d),c(i.onAddMore())}),s(63,` Print Bin
`),o()()(),a(64,"mat-paginator",39),_("page",function(Ee){return p(d),c(i.onPaginateChange(Ee))}),o()()}if(n&2){let d=B(22);l(7),v("bg-amber-400",i.searchByCode&&!i.showDateRange)("bg-gray-300",!i.searchByCode||i.showDateRange),l(2),m("svgIcon","mat_outline:qr_code_scanner"),l(),v("bg-amber-400",!i.searchByCode&&!i.showDateRange)("bg-gray-300",i.searchByCode||i.showDateRange),l(2),m("svgIcon","heroicons_outline:user-circle"),l(),v("bg-amber-400",i.showDateRange)("bg-gray-300",!i.showDateRange),l(2),m("svgIcon","mat_outline:calendar_today"),l(4),m("subscriptSizing","dynamic"),l(),m("ngIf",!i.showDateRange)("ngIfElse",d),l(4),m("svgIcon","heroicons_mini:magnifying-glass"),l(5),m("dataSource",i.supplier),l(31),m("matHeaderRowDef",i.displayedColumns),l(),m("matRowDefColumns",i.displayedColumns),l(3),m("length",i.totalItems)("pageSize",i.pageSize)("pageIndex",i.currentPage-1)("pageSizeOptions",I(26,Ie))}},dependencies:[H,z,F,Z,K,U,Y,q,ge,he,fe,ne,re,de,oe,ae,me,le,se,pe,ce,Q,$,j,W,te,ee,ue,X,L,Be,J,G,we,_e,xe,Ce,Se,be,N],encapsulation:2})}}return t})();var Nt=[{path:"",component:Re,children:[]}];export{Nt as default};
