import{b as $,c as ee,d as te}from"./chunk-MBFKKYVB.js";import{a as ce,b as le}from"./chunk-JCUL3757.js";import{b as ne,c as ie,d as re,e as ae,f as oe}from"./chunk-R44K775J.js";import{a as Z}from"./chunk-PH6QFVW6.js";import{A as J,H as K,J as Q,K as X,l as j,n as D,q as z,r as U,w as Y,x as H}from"./chunk-MXRUEL7B.js";import{a as O,b as W,g as R}from"./chunk-TEYA6QDP.js";import{a as q,d as L}from"./chunk-VPJKTFM7.js";import{j as F,r as G}from"./chunk-MZLVPJ5Q.js";import{Aa as b,Ac as v,Bc as r,Cc as s,Db as P,Fc as E,Gc as w,Hc as N,Jc as A,Kb as g,Tb as p,Tc as S,a as V,cc as n,dc as t,ec as _,fc as k,g as M,gc as h,ic as x,nb as o,ob as f,oc as C,qc as m,x as T,za as d}from"./chunk-2GFQMTJ2.js";var I=()=>({standalone:!0});function me(a,u){if(a&1){let e=x();k(0),n(1,"input",22),N("ngModelChange",function(i){d(e);let c=m(2);return w(c.bankAccountName,i)||(c.bankAccountName=i),b(i)}),t(),h()}if(a&2){let e=m(2);o(),E("ngModel",e.bankAccountName),p("ngModelOptions",A(2,I))}}function se(a,u){if(a&1&&(n(0,"span"),r(1),t()),a&2){let e=m(2);o(),s(e.bankAccount.bankAccountName)}}function ue(a,u){if(a&1&&(n(0,"div",10)(1,"strong"),r(2,"Account Name:"),t(),g(3,me,2,3,"ng-container",11)(4,se,2,1,"ng-template",null,4,S),t()),a&2){let e=v(5),l=m();o(3),p("ngIf",l.isEditing)("ngIfElse",e)}}function de(a,u){if(a&1){let e=x();k(0),n(1,"input",22),N("ngModelChange",function(i){d(e);let c=m();return w(c.bankBranch,i)||(c.bankBranch=i),b(i)}),t(),h()}if(a&2){let e=m();o(),E("ngModel",e.bankBranch),p("ngModelOptions",A(2,I))}}function be(a,u){if(a&1&&(n(0,"span"),r(1),t()),a&2){let e=m();o(),s(e.bankAccount.bankBranch)}}function ge(a,u){if(a&1){let e=x();k(0),n(1,"input",22),N("ngModelChange",function(i){d(e);let c=m();return w(c.bankAccountNumber,i)||(c.bankAccountNumber=i),b(i)}),t(),h()}if(a&2){let e=m();o(),E("ngModel",e.bankAccountNumber),p("ngModelOptions",A(2,I))}}function _e(a,u){if(a&1&&(n(0,"span"),r(1),t()),a&2){let e=m();o(),s(e.bankAccount.bankAccountNumber)}}function xe(a,u){if(a&1){let e=x();k(0),n(1,"input",22),N("ngModelChange",function(i){d(e);let c=m();return w(c.bankName,i)||(c.bankName=i),b(i)}),t(),h()}if(a&2){let e=m();o(),E("ngModel",e.bankName),p("ngModelOptions",A(2,I))}}function fe(a,u){if(a&1&&(n(0,"span"),r(1),t()),a&2){let e=m();o(),s(e.bankAccount.bankName)}}function ke(a,u){if(a&1){let e=x();k(0),n(1,"button",21),C("click",function(){d(e);let i=m();return b(i.saveEdit())}),r(2,"Save"),t(),n(3,"button",23),C("click",function(){d(e);let i=m();return b(i.cancelEdit())}),r(4,"Cancel"),t(),h()}}function he(a,u){if(a&1){let e=x();n(0,"button",24),C("click",function(){d(e);let i=m();return b(i.enableEdit())}),r(1,"Edit"),t()}}function ve(a,u){if(a&1&&(n(0,"mat-card-content")(1,"div",10)(2,"strong"),r(3,"VAT Enabled:"),t(),n(4,"span"),r(5),t()(),n(6,"div",10)(7,"strong"),r(8,"VAT Reg Number:"),t(),n(9,"span"),r(10),t()(),n(11,"div",10)(12,"strong"),r(13,"NBT Enabled:"),t(),n(14,"span"),r(15),t()(),n(16,"div",10)(17,"strong"),r(18,"TIN Number:"),t(),n(19,"span"),r(20),t()(),n(21,"div",10)(22,"strong"),r(23,"Contact Person:"),t(),n(24,"span"),r(25),t()(),n(26,"div",10)(27,"strong"),r(28,"Mobile:"),t(),n(29,"span"),r(30),t()(),n(31,"div",10)(32,"strong"),r(33,"Office Address:"),t(),n(34,"span"),r(35),t()(),n(36,"div",10)(37,"strong"),r(38,"Web:"),t(),n(39,"span"),r(40),t()()()),a&2){let e=m();o(5),s(e.supplierDetails.isVATEnable?"Yes":"No"),o(5),s(e.supplierDetails.vatRegNumber),o(5),s(e.supplierDetails.isNBTEnable?"Yes":"No"),o(5),s(e.supplierDetails.tinNumber),o(5),s(e.supplierDetails.contactPersonName),o(5),s(e.supplierDetails.contactPersonMobile),o(5),s(e.supplierDetails.addressOffice),o(5),s(e.supplierDetails.website)}}function Se(a,u){if(a&1&&(n(0,"mat-card-content")(1,"div",10)(2,"strong"),r(3,"Maximum Credit Limit:"),t(),n(4,"span"),r(5),t()(),n(6,"div",10)(7,"strong"),r(8,"Credit Period (days):"),t(),n(9,"span"),r(10),t()(),n(11,"div",10)(12,"strong"),r(13,"Cheque Drawn:"),t(),n(14,"span"),r(15),t()()()),a&2){let e=m();o(5),s(e.bank.maximumCreditLimit),o(5),s(e.bank.creditPeriod),o(5),s(e.bank.chequeDrawn)}}var Re=(()=>{class a{constructor(e,l,i,c,y,B){this.fb=e,this.dialogRef=l,this.data=i,this.supservice=c,this.supplierbankacc=y,this.supplierbank=B,this.supplierDetails=null,this.bankAccount={},this.bank=null,this.isEditing=!1,this.bankAccountName="",this.bankBranch="",this.bankAccountNumber="",this.bankName=""}enableEdit(){this.isEditing=!0,this.bankAccountName=this.bankAccount.bankAccountName??"",this.bankBranch=this.bankAccount.bankBranch??"",this.bankAccountNumber=this.bankAccount.bankAccountNumber??"",this.bankName=this.bankAccount.bankName??""}cancelEdit(){this.isEditing=!1}saveEdit(){let e={id:this.bankAccount.id,bankAccountName:this.bankAccountName,bankBranch:this.bankBranch,bankAccountNumber:this.bankAccountNumber,bankName:this.bankName};this.supplierbankacc.partialUpdate(e).subscribe({next:l=>{console.log("Updated successfully:",l),this.bankAccount=V(V({},this.bankAccount),e),this.isEditing=!1},error:l=>{console.error("Error while updating:",l)}})}ngOnInit(){return M(this,null,function*(){let e=this.data.id,l=yield this.fetchSupplierBankAcc(e);console.log("Fetched ID:",l);let i=yield this.fetchSupplierBank(e);this.supplierFormGroup=this.fb.group({isVATEnable:[!1],vatRegNumber:[""],isNBTEnable:[!1],tinNumber:[""],contactPersonName:[""],contactPersonMobile:[""],addressOffice:[""],website:[""]}),this.bankAccountFormGroup=this.fb.group({bankAccountName:["",D.required],bankBranch:[""],bankAccountNumber:["",D.required],bankName:[""]}),this.bankFormGroup=this.fb.group({maximumCreditLimit:[""],creditPeriod:[""],chequeDrawn:[""]}),this.supservice.find(e).subscribe({next:c=>{this.supplierDetails=c.body??c,this.supplierFormGroup.patchValue(this.supplierDetails)},error:c=>console.error("Supplier error:",c)}),this.supplierbankacc.find(l).subscribe({next:c=>{this.bankAccount=c.body??c,this.bankAccountFormGroup.patchValue({bankAccountName:this.bankAccount.bankAccountName||"",bankBranch:this.bankAccount.bankBranch||"",bankAccountNumber:this.bankAccount.bankAccountNumber||"",bankName:this.bankAccount.bankName||""})},error:c=>console.error("Bank Account error:",c)}),this.supplierbank.find(i).subscribe({next:c=>{this.bank=c.body??c,this.bankFormGroup.patchValue({maximumCreditLimit:this.bank.maximumCreditLimit||"",creditPeriod:this.bank.creditPeriod||"",chequeDrawn:this.bank.chequeDrawn||""})},error:c=>console.error("Bank error:",c)})})}fetchSupplierBankAcc(e){return M(this,null,function*(){try{let i=(yield T(this.supplierbankacc.query({"bankId.equals":e}))).body||[];return i.length>0?i[0].id:null}catch(l){return console.error("Error fetching supplier bank accounts:",l),null}})}fetchSupplierBank(e){return M(this,null,function*(){try{let i=(yield T(this.supplierbank.query({"maximumDiscount.equals":e}))).body||[];return i.length>0?i[0].id:null}catch(l){return console.error("Error fetching supplier bank accounts:",l),null}})}static{this.\u0275fac=function(l){return new(l||a)(f(K),f(O),f(W),f(Z),f(le),f(ce))}}static{this.\u0275cmp=P({type:a,selectors:[["app-supplierview"]],decls:71,vars:17,consts:[["viewBranch",""],["viewAccountNumber",""],["viewBankName",""],["editButton",""],["viewAccountName",""],[1,"stepper-wrapper"],["linear",""],["label","Bank Account",3,"stepControl"],[3,"formGroup"],["class","detail-item",4,"ngIf"],[1,"detail-item"],[4,"ngIf","ngIfElse"],[2,"display","flex","align-items","center"],["mat-button","","matStepperNext","",2,"margin-left","1.5rem","display","flex","align-items","center","gap","0.5rem"],["label","Supplier Details",3,"stepControl"],[4,"ngIf"],[2,"display","flex","align-items","center","gap","1rem"],["mat-button","","matStepperPrevious","","mat-stroked-button","","color","primary"],["mat-button","","matStepperNext","","mat-stroked-button","","color","primary"],["label","Bank Details",3,"stepControl"],["mat-button","","matStepperPrevious",""],["mat-raised-button","","color","primary",3,"click"],["type","text",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["mat-button","","color","warn",3,"click"],["mat-stroked-button","","color","primary",3,"click"]],template:function(l,i){if(l&1){let c=x();n(0,"div",5)(1,"mat-horizontal-stepper",6)(2,"mat-step",7)(3,"form",8),_(4,"br"),n(5,"mat-card-title"),r(6,"Bank Account Information"),t(),_(7,"br")(8,"br"),n(9,"mat-card-content"),g(10,ue,6,2,"div",9),n(11,"div",10)(12,"strong"),r(13,"Branch:"),t(),g(14,de,2,3,"ng-container",11)(15,be,2,1,"ng-template",null,0,S),t(),n(17,"div",10)(18,"strong"),r(19,"Account Number:"),t(),g(20,ge,2,3,"ng-container",11)(21,_e,2,1,"ng-template",null,1,S),t(),n(23,"div",10)(24,"strong"),r(25,"Bank Name:"),t(),g(26,xe,2,3,"ng-container",11)(27,fe,2,1,"ng-template",null,2,S),t()(),_(29,"br")(30,"br"),n(31,"div",12)(32,"div"),g(33,ke,5,0,"ng-container",11)(34,he,2,0,"ng-template",null,3,S),t(),n(36,"button",13),r(37," Next "),t()()()(),n(38,"mat-step",14)(39,"form",8)(40,"mat-card-title"),r(41,"General Information"),t(),_(42,"br")(43,"br"),g(44,ve,41,8,"mat-card-content",15),_(45,"br"),n(46,"div",16)(47,"button",17),r(48,"Back"),t(),n(49,"button",18),r(50,"Next"),t()()()(),n(51,"mat-step",19)(52,"form",8)(53,"mat-card-title"),r(54,"Bank Details"),t(),_(55,"br")(56,"br"),g(57,Se,16,3,"mat-card-content",15),_(58,"br")(59,"br")(60,"br")(61,"br")(62,"br")(63,"br")(64,"br")(65,"br"),n(66,"div",16)(67,"button",20),r(68,"Back"),t(),n(69,"button",21),C("click",function(){return d(c),b(i.dialogRef.close())}),r(70,"Close"),t()()()()()()}if(l&2){let c=v(16),y=v(22),B=v(28),pe=v(35);o(2),p("stepControl",i.bankAccountFormGroup),o(),p("formGroup",i.bankAccountFormGroup),o(7),p("ngIf",i.bankAccount),o(4),p("ngIf",i.isEditing)("ngIfElse",c),o(6),p("ngIf",i.isEditing)("ngIfElse",y),o(6),p("ngIf",i.isEditing)("ngIfElse",B),o(7),p("ngIf",i.isEditing)("ngIfElse",pe),o(5),p("stepControl",i.supplierFormGroup),o(),p("formGroup",i.supplierFormGroup),o(5),p("ngIf",i.supplierDetails),o(7),p("stepControl",i.bankFormGroup),o(),p("formGroup",i.bankFormGroup),o(5),p("ngIf",i.bank)}},dependencies:[G,F,R,te,ee,$,L,q,oe,ne,ie,re,ae,X,H,j,z,U,J,Q,Y],styles:[".mat-mdc-card-content[_ngcontent-%COMP%]{padding:1px!important}","mat-card[_ngcontent-%COMP%]{margin:20px 0;padding:16px}mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}mat-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px 40px}.detail-item[_ngcontent-%COMP%]{margin-bottom:16px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:600}.stepper-wrapper[_ngcontent-%COMP%]{min-height:500px;transition:min-height .3s ease;overflow:hidden}mat-horizontal-stepper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:500px}mat-step[_ngcontent-%COMP%]{flex-grow:1}"]})}}return a})();export{Re as a};
