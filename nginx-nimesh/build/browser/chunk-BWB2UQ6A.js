import{a as me}from"./chunk-5B6KG46D.js";import{a as P}from"./chunk-7T3DP6DK.js";import{d as le}from"./chunk-MBFKKYVB.js";import"./chunk-2BGIWFS4.js";import{a as pe,b as ce}from"./chunk-JCUL3757.js";import"./chunk-R44K775J.js";import{a as ae}from"./chunk-PH6QFVW6.js";import{a as J,b as K,c as L,d as Q,e as U,f as W,g as Y,h as Z,i as ee,j as te,k as ie}from"./chunk-4HPTI4QK.js";import{a as oe,b as re}from"./chunk-4IV6I57G.js";import{b as ne}from"./chunk-T73PE35A.js";import{a as G}from"./chunk-E4TC4E2W.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-OT3AQSDR.js";import"./chunk-4WAQRQWE.js";import"./chunk-HLRQKUHW.js";import"./chunk-5RBAZJQA.js";import{J as j,O as q,P as X,d as E,i as B,j as z,l as A,q as N,w as $}from"./chunk-MXRUEL7B.js";import{b as V,c as H}from"./chunk-PNSBUHWU.js";import{c as T}from"./chunk-TEYA6QDP.js";import"./chunk-JTAP5U5F.js";import{a as R,d as F}from"./chunk-VPJKTFM7.js";import"./chunk-GXFYRQIF.js";import"./chunk-T4I3R2GV.js";import{i as _}from"./chunk-DJWEABC6.js";import{r as I}from"./chunk-MZLVPJ5Q.js";import{Aa as M,Bc as a,Cc as O,Db as h,Dc as C,Jc as D,Kb as u,Tb as c,Vb as w,cc as o,dc as r,ec as s,fc as f,gc as g,ic as k,nb as l,oa as b,ob as v,oc as d,qc as y,za as x}from"./chunk-2GFQMTJ2.js";var ge=()=>[5,10,20];function he(t,p){t&1&&(o(0,"th",35),a(1," Code "),r())}function _e(t,p){if(t&1&&(o(0,"td",36),a(1),r()),t&2){let e=p.$implicit;l(),C(" ",e.code," ")}}function Ce(t,p){t&1&&(o(0,"th",37),a(1,"ID"),r())}function Se(t,p){if(t&1&&(o(0,"td",38),a(1),r()),t&2){let e=p.$implicit;l(),O(e.id)}}function be(t,p){t&1&&(o(0,"th",35),a(1," Name "),r())}function xe(t,p){if(t&1&&(o(0,"td",36),a(1),r()),t&2){let e=p.$implicit;l(),C(" ",e.name," ")}}function Me(t,p){t&1&&(o(0,"th",35),a(1," Phone "),r())}function ve(t,p){if(t&1&&(o(0,"td",36),a(1),r()),t&2){let e=p.$implicit;l(),C(" ",e.contactPersonMobile," ")}}function we(t,p){t&1&&(o(0,"th",35),a(1," Email "),r())}function ye(t,p){if(t&1&&(o(0,"td",36),a(1),r()),t&2){let e=p.$implicit;l(),C(" ",e.email," ")}}function Pe(t,p){t&1&&s(0,"th",39)}function ke(t,p){if(t&1){let e=k();o(0,"td",36)(1,"button",40),d("click",function(){let n=x(e).$implicit,m=y();return M(m.viewopenSupplierViewDialog(n.id))}),a(2," View "),r(),o(3,"button",41),d("click",function(){let n=x(e).$implicit,m=y();return M(m.deleteSupplier(n.id))}),a(4," Delete "),r()()}}function Oe(t,p){t&1&&s(0,"tr",42)}function De(t,p){t&1&&s(0,"tr",43)}var de=(()=>{class t{openSupplierViewDialog(e){this._dialogService.open(P,{data:{id:e}})}toggleDetails(e){this.supplierbankacc.find(e).subscribe({next:i=>{console.log("Bank Account:",i)},error:i=>console.error("Bank Account error:",i)}),this.supplierbank.find(e).subscribe({next:i=>{console.log("Bank:",i)},error:i=>console.error("Bank error:",i)}),this.supservice.find(e).subscribe({next:i=>{console.log("Supplier:",i)},error:i=>console.error("Supplier error:",i)})}onPaginateChange(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex+1,this.loadSuppliers()}deleteSupplier(e){this.supplierbankacc.delete(e).subscribe({next:()=>{this.supplierbank.delete(e).subscribe({next:()=>{this.supservice.delete(e).subscribe({next:()=>{this._snackBarService.open("Supplier deleted successfully!","Close",{duration:3e3}),this.loadSuppliers()},error:i=>{console.error("Supplier delete failed",i),this._snackBarService.open("Supplier delete failed","Close",{duration:3e3})}})},error:i=>{console.error("Supplier bank delete failed",i),this._snackBarService.open("Supplier bank delete failed","Close",{duration:3e3})}})},error:i=>{console.error("Supplier bank account delete failed",i),this._snackBarService.open("Supplier bank account delete failed","Close",{duration:3e3})}})}ngOnInit(){this.loadSuppliers()}get displayedColumns(){let e=["code","vehicleOwnerName","vehicleBrand","vehicleModel","action"];return this.showId&&e.unshift("id"),e}constructor(e,i){this._dialogService=e,this._snackBarService=i,this.supservice=b(ae),this.supplierbank=b(ce),this.supplierbankacc=b(pe),this.supplier=[],this.currentPage=1,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.searchByCode=!1,this.filter={name:"",code:""},this.selectedSupplierId=3,this.itemsPerPage=10,this.showId=!1}openVehicleCreateDialog(){this._dialogService.open(me,{width:"80vh",maxHeight:"95vh"}).afterClosed().subscribe(i=>{i&&(this._snackBarService.open("Supplier Created Successfully!","Close",{duration:3e3}),this.loadSuppliers())})}viewopenSupplierViewDialog(e){this._dialogService.open(P,{data:{id:e}})}onFilterChange(){this.currentPage=1,this.loadSuppliers()}clearSearchAndReload(){this.searchByCode?this.filter.code="":this.filter.name="",this.loadSuppliers()}loadSuppliers(){let e={page:this.currentPage-1,size:this.pageSize,sort:"id,desc"};this.filter.name.trim()&&(e["name.contains"]=this.filter.name.trim()),this.filter.code.trim()&&(e["code.contains"]=this.filter.code.trim()),this.supservice.query(e).subscribe({next:i=>{this.supplier=i.body||[];let n=i.headers.get("X-Total-Count");this.totalItems=n?+n:0,this.totalPages=Math.ceil(this.totalItems/this.pageSize)},error:i=>{console.error("Error fetching supplier data:",i)}})}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadSuppliers())}nextPage(){this.goToPage(this.currentPage+1)}previousPage(){this.goToPage(this.currentPage-1)}onSearch(){this.currentPage=1,this.loadSuppliers()}onRowCountChange(){this.currentPage=1,this.loadSuppliers()}viewSupplier(e){console.log("Viewing supplier:",e)}static{this.\u0275fac=function(i){return new(i||t)(v(T),v(G))}}static{this.\u0275cmp=h({type:t,selectors:[["app-supplier"]],decls:51,vars:24,consts:[[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-default","flex","flex-0","flex-col","p-6","pb-22","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-28","sm:pt-12"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"flex","gap-2","mr-4"],["aria-label","Search by Code",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400",3,"click"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-lg","bg-indigo-100","text-indigo-800","dark:bg-indigo-600","dark:text-indigo-50"],[1,"text-2xl",3,"svgIcon"],["aria-label","Search by Name",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400",3,"click"],["aria-label","Refresh Filters","title","Clear filters and reload",1,"px-2","py-2","text-white","rounded-xl","transition-all","hover:bg-amber-400","bg-gray-300",3,"click"],["svgIcon","mat_outline:refresh",1,"text-2xl"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","autocomplete","off",3,"ngModelChange","keydown.enter","placeholder","ngModel"],["mat-flat-button","","color","primary",1,"ml-3",3,"click"],[1,"icon-size-4",3,"svgIcon"],[1,"ml-2"],[1,"example-table-container","bg-card","-mt-16","h-full","rounded-t-2xl","shadow","overflow-auto",2,"min-height","0","max-height","6020px"],[1,"flex","flex-col","flex-auto","sm:mb-18"],["mat-table","","matSort","",1,"w-full","table-fixed","border-separate","border-spacing-y-2",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","","class","sticky top-0 z-10 bg-white dark:bg-gray-900 px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-cell","","class","px-4 py-2",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicleOwnerName"],["matColumnDef","vehicleBrand"],["matColumnDef","vehicleModel"],["matColumnDef","action"],["mat-header-cell","","class","sticky top-0 z-10 bg-white dark:bg-gray-900 px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"sticky","top-0","z-10","bg-white","dark:bg-gray-900","px-4","py-3","text-left","font-semibold"],["mat-cell","",1,"px-4","py-2"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"sticky","top-0","z-10","bg-white","dark:bg-gray-900","px-4","py-3","text-left","font-semibold"],["mat-flat-button","","color","primary",1,"fuse-mat-button-large","mr-2",3,"click"],["mat-flat-button","","color","warn",1,"fuse-mat-button-large",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),a(4," Supplier "),r()(),o(5,"div",4)(6,"div",5)(7,"button",6),d("click",function(){return n.searchByCode=!0}),o(8,"div",7),s(9,"mat-icon",8),r()(),o(10,"button",9),d("click",function(){return n.searchByCode=!1}),o(11,"div",7),s(12,"mat-icon",8),r()(),o(13,"button",10),d("click",function(){return n.clearSearchAndReload()}),o(14,"div",7),s(15,"mat-icon",11),r()()(),o(16,"mat-form-field",12),s(17,"mat-icon",13),o(18,"input",14),d("ngModelChange",function(S){return n.searchByCode?n.filter.code=S:n.filter.name=S})("keydown.enter",function(){return n.loadSuppliers()}),r()(),o(19,"button",15),d("click",function(){return n.onFilterChange()}),s(20,"mat-icon",16),o(21,"span",17),a(22,"Search"),r()(),o(23,"button",15),d("click",function(){return n.openVehicleCreateDialog()}),s(24,"mat-icon",16),o(25,"span",17),a(26,"Create"),r()()()(),o(27,"div",18)(28,"div",19)(29,"table",20),f(30,21),u(31,he,2,0,"th",22)(32,_e,2,1,"td",23),g(),f(33,24),u(34,Ce,2,0,"th",25)(35,Se,2,1,"td",26),g(),f(36,27),u(37,be,2,0,"th",22)(38,xe,2,1,"td",23),g(),f(39,28),u(40,Me,2,0,"th",22)(41,ve,2,1,"td",23),g(),f(42,29),u(43,we,2,0,"th",22)(44,ye,2,1,"td",23),g(),f(45,30),u(46,Pe,1,0,"th",31)(47,ke,5,0,"td",23),g(),u(48,Oe,1,0,"tr",32)(49,De,1,0,"tr",33),r()()(),o(50,"mat-paginator",34),d("page",function(S){return n.onPaginateChange(S)}),r()()),i&2&&(l(7),w("bg-amber-400",n.searchByCode)("bg-gray-300",!n.searchByCode),l(2),c("svgIcon","mat_outline:qr_code_scanner"),l(),w("bg-amber-400",!n.searchByCode)("bg-gray-300",n.searchByCode),l(2),c("svgIcon","heroicons_outline:user-circle"),l(4),c("subscriptSizing","dynamic"),l(),c("svgIcon",n.searchByCode?"mat_outline:qr_code_scanner":"heroicons_solid:magnifying-glass"),l(),c("placeholder",n.searchByCode?"Search by Code":"Search by Name")("ngModel",n.searchByCode?n.filter.code:n.filter.name),l(2),c("svgIcon","heroicons_mini:magnifying-glass"),l(4),c("svgIcon","heroicons_mini:plus"),l(5),c("dataSource",n.supplier),l(19),c("matHeaderRowDef",n.displayedColumns),l(),c("matRowDefColumns",n.displayedColumns),l(),c("length",n.totalItems)("pageSize",n.pageSize)("pageIndex",n.currentPage-1)("pageSizeOptions",D(23,ge)))},dependencies:[I,j,A,N,$,_,re,oe,ie,J,L,Y,Q,K,Z,U,W,ee,te,z,B,E,X,q,ne,F,R,le,H,V],styles:[".content-box[_ngcontent-%COMP%]{padding:2rem;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d;width:100vw;max-width:100vw;margin:0 auto;box-sizing:border-box;overflow-x:auto}.filter-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}.filter-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;min-width:220px}.filter-section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.row-count-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem}.row-count-selector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100px}.row-count-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333}.table-container[_ngcontent-%COMP%]{overflow-x:auto;max-height:500px;width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:700px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2;background-color:#0d3b66;color:#fff;font-weight:600;padding:1rem;text-align:left}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;color:#333}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eef6ff}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .75rem}.table-container[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:has(td[colspan]){text-align:center;color:#999;font-style:italic}@media (max-width: 768px){.filter-section[_ngcontent-%COMP%]{flex-direction:column}.filter-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.row-count-selector[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.row-count-selector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}"]})}}return t})();var ue=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-addsupplier"]],decls:2,vars:0,template:function(i,n){i&1&&(o(0,"p"),a(1,"addsupplier works!"),r())},dependencies:[_],encapsulation:2})}}return t})();var fe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-readsupplier"]],decls:2,vars:0,template:function(i,n){i&1&&(o(0,"p"),a(1,"readsupplier works!"),r())},dependencies:[_],encapsulation:2})}}return t})();var st=[{path:"",component:de,children:[{path:"addsupplier",component:ue},{path:"readsupplier",component:fe}]}];export{st as default};
