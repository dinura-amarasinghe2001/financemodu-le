import{a as ne}from"./chunk-VQIWVYPK.js";import{a as de}from"./chunk-7RWLPLTW.js";import{b as le}from"./chunk-HN3GTZ22.js";import{b as ae}from"./chunk-2V7PXVXU.js";import{a as ee,c as te,d as oe}from"./chunk-4WAQRQWE.js";import{d as G}from"./chunk-KKTU7MAV.js";import{A as K,B as Q,H as X,J as Y,K as Z,O as ie,P as re,b as W,i as z,j as E,l as U,q as $,r as q,u as P,x as H,z as J}from"./chunk-MXRUEL7B.js";import{c as R}from"./chunk-PNSBUHWU.js";import{a as N,b as V,e as k,f as T,g as L}from"./chunk-TEYA6QDP.js";import{a as O,d as j}from"./chunk-VPJKTFM7.js";import{fa as D,ia as I}from"./chunk-GXFYRQIF.js";import{i as x,m as F,r as A}from"./chunk-MZLVPJ5Q.js";import{Aa as u,Ac as S,Bc as d,Db as C,Dc as h,Kb as y,Qc as B,Rc as w,Tb as s,a as M,aa as v,cc as l,dc as r,ec as b,ic as _,nb as a,ob as m,oc as f,y as g,za as p}from"./chunk-2GFQMTJ2.js";function ce(n,me){if(n&1&&(l(0,"mat-option",14),d(1),r()),n&2){let e=me.$implicit;s("value",e),a(),h(" ",e.brandName," ")}}var We=(()=>{class n{constructor(e,o,t,i,c){this.dialogRef=e,this.data=o,this._fb=t,this._modelService=i,this._brandService=c,this.brandControl=new P,this.allBrands=[]}ngOnInit(){this.modelForm=this._fb.group({modelName:[""],description:[""],opsUnitID:[""],createdBy:[""],brand:{},createdDate:[null],lastModifiedBy:[""],lastModifiedDate:[null]}),this._brandService.query({size:1e3}).subscribe(e=>{if(this.allBrands=e.body||[],this.data?.model){let o=this.data.model.brand?.id;if(o&&this.allBrands.length){let t=this.allBrands.find(i=>i.id===o);t&&this.brandControl.setValue(t.brandName)}}}),this.filteredBrands$=this.brandControl.valueChanges.pipe(v(""),g(e=>typeof e=="string"?e.toLowerCase():e?.brandName?.toLowerCase()||""),g(e=>this.filterBrand(e))),this.data?.model&&(this.modelForm.patchValue(this.data.model),console.log("Model Data:",this.data.model))}filterBrand(e){if(!e)return this.allBrands;let o=e.toLowerCase();return this.allBrands.filter(t=>t.brandName?.toLowerCase().includes(o)||t.description?.toLowerCase().includes(o)||t.emblem?.toLowerCase().includes(o)||t.id?.toString().toLowerCase().includes(o))}onSelectBrand(e){let o=e.option.value;console.log("Selected Brand:",o),o&&this.modelForm.patchValue({brand:{id:o.id}})}submitModel(){let e=this.modelForm.value;if(this.data?.model?.id){let o=M(M({},this.data.model),e);this._modelService.update(o).subscribe(t=>{console.log("Model Updated Successfully",t),this.dialogRef.close(!0)})}else console.log("modelData",e),this._modelService.create(e).subscribe(o=>{console.log("Model Created Successfully",o),this.dialogRef.close(o)})}cancel(){this.dialogRef.close()}displayBrand(e){return e?.brandName||""}static{this.\u0275fac=function(o){return new(o||n)(m(N),m(V),m(X),m(de),m(ne))}}static{this.\u0275cmp=C({type:n,selectors:[["app-model-add-wizard"]],decls:22,vars:9,consts:[["autoStudent","matAutocomplete"],[1,"flex","flex-col","items-center","p-3","text-center","text-xl","font-semibold","text-gray-800","dark:text-white"],[1,"flex","flex-col","space-y-4"],[3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","modelName"],[1,"w-full"],["type","text","matInput","","placeholder","Type to find Brand",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","p-1","text-center"],[1,"flex","space-x-3"],["mat-button","",1,"rounded-lg","bg-gray-200","px-4","py-2","text-2xl","text-gray-600","hover:bg-gray-300","dark:bg-gray-700","dark:text-white","dark:hover:bg-gray-600",3,"click"],["mat-button","",1,"rounded-lg","bg-red-500","px-4","py-2","text-2xl","text-white","shadow-lg","hover:bg-red-600","focus:outline-none","focus:ring","focus:ring-red-300",3,"click"],[3,"value"]],template:function(o,t){if(o&1){let i=_();l(0,"h2",1),d(1),r(),l(2,"mat-dialog-content",2)(3,"form",3)(4,"mat-form-field",4)(5,"mat-label"),d(6,"Model Name"),r(),b(7,"input",5),r(),l(8,"mat-form-field",6)(9,"mat-label"),d(10,"Brand"),r(),b(11,"input",7),l(12,"mat-autocomplete",8,0),f("optionSelected",function(se){return p(i),u(t.onSelectBrand(se))}),y(14,ce,2,2,"mat-option",9),B(15,"async"),r()()()(),l(16,"mat-dialog-actions",10)(17,"div",11)(18,"button",12),f("click",function(){return p(i),u(t.cancel())}),d(19," Cancel "),r(),l(20,"button",13),f("click",function(){return p(i),u(t.submitModel())}),d(21),r()()()}if(o&2){let i=S(13);a(),h(" ",!(t.data==null||t.data.model==null)&&t.data.model.id?"Update Model":"Create Model",`
`),a(2),s("formGroup",t.modelForm),a(8),s("formControl",t.brandControl)("matAutocomplete",i),a(),s("displayWith",t.displayBrand),a(2),s("ngForOf",w(15,7,t.filteredBrands$)),a(7),h(" ",!(t.data==null||t.data.model==null)&&t.data.model.id?"Update":"Create"," ")}},dependencies:[A,x,F,L,T,k,E,z,W,Y,H,U,$,q,Z,J,K,Q,j,O,R,G,le,re,ie,I,D,ae,oe,ee,te],encapsulation:2})}}return n})();export{We as a};
