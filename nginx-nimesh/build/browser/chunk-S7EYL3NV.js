import{a as A,b as D}from"./chunk-FKEP7USQ.js";import{a as T}from"./chunk-PH6QFVW6.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-5RBAZJQA.js";import{b as M}from"./chunk-DJWEABC6.js";import{i as k,j as N,n as _,p as C,r as w}from"./chunk-MZLVPJ5Q.js";import{Bc as t,Cc as m,Db as y,Dc as p,Kb as v,Qc as c,Sc as u,Tb as x,cc as i,dc as e,ec as s,fc as S,gc as E,nb as a,oa as b,ob as f,qc as I}from"./chunk-2GFQMTJ2.js";function B(o,h){if(o&1&&(i(0,"tr",15)(1,"td",11),t(2),e(),i(3,"td",16),t(4),e(),i(5,"td",11),t(6),e(),i(7,"td",17),t(8),e(),i(9,"td",17),t(10),c(11,"number"),e(),i(12,"td",17),t(13),c(14,"number"),e()()),o&2){let r=h.$implicit;a(2),m(r.itemCode),a(2),m(r.itemName),a(2),m(r.unit),a(2),m(r.quantity),a(2),m(u(11,6,r.price,"1.2-2")),a(3),m(u(14,9,r.lineTotal,"1.2-2"))}}function F(o,h){o&1&&(i(0,"div",18)(1,"div"),s(2,"div",19),i(3,"div",20),t(4,"Prepared By"),e()(),i(5,"div"),s(6,"div",19),i(7,"div",20),t(8,"Checked By"),e()(),i(9,"div"),s(10,"div",19),i(11,"div",20),t(12,"Authorized By"),e()(),i(13,"div"),s(14,"div",19),i(15,"div",20),t(16,"Acc Det Re Date"),e()()())}function R(o,h){o&1&&s(0,"div",21)}function q(o,h){if(o&1&&(S(0),i(1,"div",1)(2,"div",2),s(3,"br"),i(4,"div",3)(5,"div",4)(6,"div")(7,"strong"),t(8,"Date Of Issue:"),e(),t(9),c(10,"date"),e(),i(11,"div")(12,"strong"),t(13,"Issue Number:"),e(),t(14),e()(),i(15,"div",5),t(16," GRN - RAC "),e(),i(17,"div",6)(18,"div")(19,"strong"),t(20,"GRN Date:"),e(),t(21),c(22,"date"),e(),i(23,"div")(24,"strong"),t(25,"GRN No:"),e(),t(26),e(),i(27,"div")(28,"strong"),t(29,"GRN Total:"),e(),t(30),c(31,"number"),e(),i(32,"div")(33,"strong"),t(34,"S.I No:"),e(),t(35),e(),i(36,"div")(37,"strong"),t(38,"S.I Date:"),e(),t(39),c(40,"date"),e()()(),i(41,"div",7)(42,"div")(43,"strong"),t(44,"Supplier Name:"),e(),t(45),e(),i(46,"div")(47,"strong"),t(48,"Supplier Address:"),e(),t(49),e()(),i(50,"table",8)(51,"thead",9)(52,"tr",10)(53,"th",11),t(54,"Code"),e(),i(55,"th",11),t(56,"Item Name"),e(),i(57,"th",11),t(58,"UMO"),e(),i(59,"th",11),t(60,"Order Qty"),e(),i(61,"th",11),t(62,"Cost Price"),e(),i(63,"th",11),t(64,"Line Total"),e()()(),i(65,"tbody"),v(66,B,15,12,"tr",12),e()()(),v(67,F,17,0,"div",13)(68,R,1,0,"div",14),e(),E()),o&2){let r=h.$implicit,l=h.last,n=I();a(9),p(" ",u(10,12,n.today,"MM/dd/yyyy"),""),a(5),p(" ",n.issueNumber,""),a(7),p(" ",u(22,15,n.grnDate,"MM/dd/yyyy"),""),a(5),p(" ",n.grncode,""),a(4),p(" ",u(31,18,n.grnTotal,"1.2-2"),""),a(5),p(" ",n.supinvoc,""),a(4),p(" ",u(40,21,n.supinvonam,"MM/dd/yyyy"),""),a(6),p(" ",n.supplierName,""),a(4),p(" ",n.supplierAddress,""),a(17),x("ngForOf",r),a(),x("ngIf",l),a(),x("ngIf",!l)}}var O=(()=>{class o{constructor(r){this.route=r,this.grnservice=b(D),this.grnlines=b(A),this.suppierser=b(T),this.supplier=[],this.supplierline=[],this.grncode=null,this.supplierName=null,this.today=new Date,this.pageCount=0,this.chunkedItems=[],this.grnTotal=0}ngOnInit(){this.issueNumber="ISSUE"+Math.floor(1e3+Math.random()*9e3);let r=this.route.snapshot.paramMap.get("id");if(console.log("Supplier ID:",r),r){let l=Number(r);this.grnservice.query({"id.equals":l}).subscribe({next:n=>{this.supplier=Array.isArray(n.body)?n.body:n.body?[n.body]:[],this.supplier.length>0&&(this.grncode=this.supplier[0].grnCode,console.log("Supplier Data:",this.supplier[0]),this.supplierName=this.supplier[0].supplierName,this.supplierAddress=this.supplier[0].supplierAddress,this.supinvoc=this.supplier[0].supplierInvoiceCode,this.supinvonam=this.supplier[0].supplierInvoiceDate,this.poNum=this.supplier[0].poNum,this.grnDate=this.supplier[0].grnDate,console.log("Supplier Nameaaaaaaa:",this.supplierName),this.suppierser.query({"name.equals":this.supplierName}).subscribe({next:d=>{let g=Array.isArray(d.body)?d.body:d.body?[d.body]:[];console.log("Suppliers Data:",g),this.supplierAddress=g[0].addressOffice||g[0].addressFactory},error:d=>{console.error("Error fetching suppliers data:",d)}}))},error:n=>{console.error("Error fetching supplier data:",n)}}),this.grnlines.query({"grnId.equals":l,size:2e7}).subscribe({next:n=>{this.supplierline=Array.isArray(n.body)?n.body:n.body?[n.body]:[],console.log("Supplier Lines Data:",this.supplierline),this.grnTotal=this.supplierline.reduce((d,g)=>d+(g.lineTotal||0),0),this.chunkedItems=this.chunkArray(this.supplierline,35),this.pageCount=this.chunkedItems.length},error:n=>{console.error("Error fetching supplier lines data:",n)}}),setTimeout(()=>{window.print()},1e3),this.chunkedItems=this.chunkArray(this.supplierline,35)}else console.warn("No ID provided in route parameters.")}chunkArray(r,l){let n=[];for(let d=0;d<r.length;d+=l)n.push(r.slice(d,d+l));return n}static{this.\u0275fac=function(l){return new(l||o)(f(M))}}static{this.\u0275cmp=y({type:o,selectors:[["modern"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"print-page"],[1,"bg-white","w-full","rounded-2xl","p-6","print:rounded-none","print:shadow-none","print:p-0","text-black"],[1,"grid","grid-cols-3","text-sm","font-medium","mb-4"],[1,"space-y-1","text-left","pl-4"],[1,"text-center","text-xl","font-bold","underline","self-center","col-span-1"],[1,"space-y-1","text-right","pr-4"],[1,"mb-6","text-sm","pl-4"],["cellspacing","0","cellpadding","6",1,"min-w-[1000px]","w-[70%]","mx-auto","text-sm","border","border-black","border-collapse","table-fixed","mb-6"],[1,"border","border-black","bg-gray-100"],[1,"text-center","font-semibold","border","border-black"],[1,"border","border-black","p-1"],["class","text-center border border-black",4,"ngFor","ngForOf"],["class","grid grid-cols-4 gap-6 text-md text-center mt-4",4,"ngIf"],["class","page-break",4,"ngIf"],[1,"text-center","border","border-black"],[1,"border","border-black","text-left","p-1"],[1,"border","border-black","p-1","text-right"],[1,"grid","grid-cols-4","gap-6","text-md","text-center","mt-4"],[1,"h-16","border-b","border-black","mb-2"],[1,"font-medium"],[1,"page-break"]],template:function(l,n){l&1&&v(0,q,69,24,"ng-container",0),l&2&&x("ngForOf",n.chunkedItems)},dependencies:[w,k,N,C,_],styles:[`.print-page{display:flex;flex-direction:column;background-color:#fff}@media screen{.print-page{min-height:auto;height:auto;justify-content:space-between;overflow:visible}}@media print{@page{size:A4 portrait;margin:20mm}html,body{width:210mm;height:297mm;margin:0;padding:0;font-size:12px;-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important}table,tr,td,th{page-break-inside:auto!important;break-inside:auto!important}.print-page{height:257mm!important;justify-content:space-between!important;page-break-inside:avoid!important}.page-break{page-break-after:always}.absolute,.inset-0{position:static!important}table.min-w-\\[1000px\\]{min-width:auto!important;width:70%!important;margin-left:auto;margin-right:auto}}
`],encapsulation:2})}}return o})();var W=[{path:":id",component:O}];export{W as default};
