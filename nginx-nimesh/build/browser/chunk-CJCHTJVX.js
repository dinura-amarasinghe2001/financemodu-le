import{a as Me}from"./chunk-FKDMVCKV.js";import{a as me}from"./chunk-GTGBE7YF.js";import{c as ve}from"./chunk-XGCX3TDA.js";import{a as pe,b as ce,c as de,d as fe,e as ue,f as he,g as _e,h as Ce,i as be,j as xe,k as Ee,l as ge}from"./chunk-4HPTI4QK.js";import{a as w,b as le,c as se}from"./chunk-Z5CSESBH.js";import{a as y,b as we}from"./chunk-4IV6I57G.js";import{b as Se}from"./chunk-T73PE35A.js";import{h as ye}from"./chunk-ZGGKBBB7.js";import{a as re}from"./chunk-E4TC4E2W.js";import"./chunk-YEGTZ3HQ.js";import"./chunk-NKWJDJWK.js";import{a as K}from"./chunk-QQNGDF4M.js";import"./chunk-YK5MGRE7.js";import{b as W}from"./chunk-OT3AQSDR.js";import"./chunk-5RBAZJQA.js";import"./chunk-LMUZFXJ5.js";import"./chunk-6F4FOUKE.js";import{J as ie,K as ae,O as oe,P as ne,d as q,i as j,j as L,l as Y,q as Z,u as ee,z as te}from"./chunk-MXRUEL7B.js";import{b as X,c as G}from"./chunk-PNSBUHWU.js";import"./chunk-GRVU3NMS.js";import{c as O,g as Q}from"./chunk-TEYA6QDP.js";import"./chunk-JTAP5U5F.js";import{a as J,d as U}from"./chunk-VPJKTFM7.js";import"./chunk-GXFYRQIF.js";import"./chunk-T4I3R2GV.js";import{d as A}from"./chunk-DJWEABC6.js";import{n as B,r as $}from"./chunk-MZLVPJ5Q.js";import{Aa as v,Bc as n,Db as F,Dc as u,E as N,H as V,Jc as R,Kb as p,Qc as H,Sc as z,Tb as c,ca as x,cc as a,dc as o,ea as E,ec as _,fc as d,gc as f,ic as M,m as k,nb as m,oa as h,oc as S,qc as P,uc as D,vc as T,wc as I,za as g}from"./chunk-2GFQMTJ2.js";var De=()=>[5,10,20];function Te(e,i){e&1&&(a(0,"th",33),n(1," ID "),o())}function Ie(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.id," ")}}function ke(e,i){e&1&&(a(0,"th",35),n(1," Pre Estimate Number "),o())}function Ne(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.preEstimateNumber," ")}}function Ve(e,i){e&1&&(a(0,"th",36),n(1," Vehicle "),o())}function Fe(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.licenseNo," ")}}function Re(e,i){e&1&&(a(0,"th",37),n(1," Created Date "),o())}function He(e,i){if(e&1&&(a(0,"td",34),n(1),H(2,"date"),o()),e&2){let t=i.$implicit;m(),u(" ",z(2,1,t.createdDate,"medium")," ")}}function ze(e,i){e&1&&(a(0,"th",36),n(1," Vehicle Brand "),o())}function Be(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.vehicleBrand," ")}}function $e(e,i){e&1&&(a(0,"th",36),n(1," Vehicle Model "),o())}function Ae(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.vehicleModel," ")}}function Oe(e,i){e&1&&(a(0,"th",36),n(1," Owner Name "),o())}function Qe(e,i){if(e&1&&(a(0,"td",34),n(1),o()),e&2){let t=i.$implicit;m(),u(" ",t.vehicleOwnerName," ")}}function qe(e,i){e&1&&_(0,"th",38)}function je(e,i){if(e&1){let t=M();a(0,"td",34)(1,"button",39),S("click",function(){let r=g(t).$implicit,l=P();return v(l.openPreEstimateTreatments(r.id))}),n(2," View "),o(),a(3,"button",40),S("click",function(){let r=g(t).$implicit,l=P();return v(l.deletePreEstimate(r))}),n(4," Delete "),o()()}}function Le(e,i){e&1&&_(0,"tr",41)}function Je(e,i){e&1&&_(0,"tr",42)}var Pe=(()=>{class e{constructor(){this._fuseConfirmationService=h(K),this.preEstimateService=h(me),this._preEstimateTreatmentService=h(Me),this._snackBarService=h(re),this.router=h(A),this.dialog=h(O),this.dataSource=new ge([]),this.displayedColumns=["id","preEstimateNumber","licenseNo","vehicleBrand","vehicleModel","vehicleOwnerName","createdDate","action"],this.searchInputControl=new ee(""),this.totalItems=0,this.itemsPerPage=10,this._unsubscribeAll=new k,this.menuData=[{id:"mailbox",title:"Mailbox",type:"group",children:[{id:"inbox",title:"Inbox",type:"basic",icon:"heroicons_outline:inbox",link:"/mailbox/inbox"},{id:"sent",title:"Sent",type:"basic",icon:"heroicons_outline:paper-airplane",link:"/mailbox/sent"}]}]}openComposeDialog(){throw new Error("Method not implemented.")}ngOnInit(){this.loadPreEstimates(),this.searchInputControl.valueChanges.pipe(x(this._unsubscribeAll),E(()=>{this.paginator.pageIndex=0,this.loadPreEstimates()})).subscribe()}ngAfterViewInit(){this.sort&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),V(this.sort.sortChange,this.paginator.page).pipe(E(()=>this.loadPreEstimates()),x(this._unsubscribeAll)).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadPreEstimates(){let t=this.paginator?.pageIndex??0,s=this.paginator?.pageSize??this.itemsPerPage,r=this.sort?.active??"createdDate",l=this.sort?.direction??"desc",b=this.searchInputControl.value??"";this.preEstimateService.query({page:t,size:s,sort:[`${r},${l}`],"preEstimateNumber.contains":b}).pipe(x(this._unsubscribeAll),E(C=>{this.totalItems=Number(C.headers.get("X-Total-Count")),this.dataSource.data=C.body??[]})).subscribe()}openPreEstimateCreateDialog(){this.router.navigate(["/pre-estimates-create"])}openPreEstimateTreatments(t){this.router.navigate(["/pre-estimates-view/",t])}openPreEstimateEditDialog(t){console.log("Open edit dialog",t)}deletePreEstimate(t){this._fuseConfirmationService.open({title:"Delete Pre Estimate",message:"Are you sure you want to delete this pre estimate? This action cannot be undone!",icon:{name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{label:"Delete",color:"warn"}}}).afterClosed().subscribe(r=>{r==="confirmed"&&this._preEstimateTreatmentService.query({"preEstimateId.equals":t.id}).subscribe(l=>{if(l.body){let b=l.body.map(C=>this._preEstimateTreatmentService.delete(C.id));console.log(l.body),N(b).subscribe(C=>{C&&(this._snackBarService.open("Pre Estimate deleted successfully!","Close",{duration:3e3}),this.preEstimateService.delete(t.id).subscribe(()=>{this.loadPreEstimates()}))})}})})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=F({type:e,selectors:[["app-pre-estimates"]],viewQuery:function(s,r){if(s&1&&(D(y,5),D(w,5)),s&2){let l;T(l=I())&&(r.paginator=l.first),T(l=I())&&(r.sort=l.first)}},decls:45,vars:13,consts:[["paginator",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-default","flex","flex-0","flex-col","p-6","pb-22","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-28","sm:pt-12"],[1,"min-w-0","flex-1"],[1,"mt-2"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","placeholder","Search Pre Estimates",3,"formControl","autocomplete"],["mat-flat-button","",1,"ml-3",3,"click","color"],[1,"icon-size-4",3,"svgIcon"],[1,"ml-2"],[1,"example-table-container","bg-card","-mt-16","h-full","rounded-t-2xl","shadow","overflow-auto"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-auto"],["mat-table","","matSort","",1,"w-full","table-fixed","border-separate","border-spacing-y-2","px-6",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold","style","width: 5%",4,"matHeaderCellDef"],["mat-cell","","class","px-4 py-2",4,"matCellDef"],["matColumnDef","preEstimateNumber"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold","style","width: 15%",4,"matHeaderCellDef"],["matColumnDef","licenseNo"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold","style","width: 10%",4,"matHeaderCellDef"],["matColumnDef","createdDate"],["mat-header-cell","","mat-sort-header","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["matColumnDef","vehicleBrand"],["matColumnDef","vehicleModel"],["matColumnDef","vehicleOwnerName"],["matColumnDef","action"],["mat-header-cell","","class","px-4 py-3 text-left font-semibold",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"bottom-0","justify-self-end",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold",2,"width","5%"],["mat-cell","",1,"px-4","py-2"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold",2,"width","15%"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold",2,"width","10%"],["mat-header-cell","","mat-sort-header","",1,"px-4","py-3","text-left","font-semibold"],["mat-header-cell","",1,"px-4","py-3","text-left","font-semibold"],["mat-flat-button","","color","primary",1,"fuse-mat-button-large","mr-2",3,"click"],["mat-flat-button","","color","warn",1,"fuse-mat-button-large",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,r){if(s&1){let l=M();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),n(5," Pre Estimates "),o()()(),a(6,"div",6)(7,"mat-form-field",7),_(8,"mat-icon",8)(9,"input",9),o(),a(10,"button",10),S("click",function(){return g(l),v(r.openPreEstimateCreateDialog())}),_(11,"mat-icon",11),a(12,"span",12),n(13,"Create New Pre Estimate"),o()()()(),a(14,"div",13)(15,"div",14)(16,"table",15),d(17,16),p(18,Te,2,0,"th",17)(19,Ie,2,1,"td",18),f(),d(20,19),p(21,ke,2,0,"th",20)(22,Ne,2,1,"td",18),f(),d(23,21),p(24,Ve,2,0,"th",22)(25,Fe,2,1,"td",18),f(),d(26,23),p(27,Re,2,0,"th",24)(28,He,3,4,"td",18),f(),d(29,25),p(30,ze,2,0,"th",22)(31,Be,2,1,"td",18),f(),d(32,26),p(33,$e,2,0,"th",22)(34,Ae,2,1,"td",18),f(),d(35,27),p(36,Oe,2,0,"th",22)(37,Qe,2,1,"td",18),f(),d(38,28),p(39,qe,1,0,"th",29)(40,je,5,0,"td",18),f(),p(41,Le,1,0,"tr",30)(42,Je,1,0,"tr",31),o()()(),_(43,"mat-paginator",32,0),o()}s&2&&(m(7),c("subscriptSizing","dynamic"),m(),c("svgIcon","heroicons_solid:magnifying-glass"),m(),c("formControl",r.searchInputControl)("autocomplete","off"),m(),c("color","primary"),m(),c("svgIcon","heroicons_mini:plus"),m(5),c("dataSource",r.dataSource),m(25),c("matHeaderRowDef",r.displayedColumns),m(),c("matRowDefColumns",r.displayedColumns),m(),c("length",r.totalItems)("pageSize",r.itemsPerPage)("pageSizeOptions",R(12,De)))},dependencies:[$,B,G,X,U,J,se,w,le,Q,ie,Y,Z,ae,te,Ee,pe,de,_e,fe,ce,Ce,ue,he,be,xe,L,j,q,ne,oe,ve,we,y,ye,Se,W],encapsulation:2})}}return e})();var Vt=[{path:"",component:Pe}];export{Vt as default};
